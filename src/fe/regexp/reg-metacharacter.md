---
title: 元字符
article: false
order: 2
---

## 概述

具有特殊含义的字符，用于定义复杂的模式匹配规则。常见的元字符包括：

- `.`：匹配除换行符外的任意单个字符
- `^`：匹配字符串的开头，或者在方括号内部用来表示取反
- `$`：匹配字符串的结尾
- `*`：匹配前面的子表达式零次或多次
- `+`：匹配前面的子表达式一次或多次
- `?`：匹配前面的子表达式零次或一次，或在某些上下文中表示非贪婪匹配
- `[]` ：匹配方括号内的任意一个字符。
- `|`：表示逻辑“或”操作
- `()`：定义子表达式，用于分组和捕获
- `{}`：匹配前面的子表达式指定次数
- `{n}` ：匹配前面的子表达式恰好n次。
- `{n,}` ：匹配前面的子表达式至少n次。
- `{n,m}` ：匹配前面的子表达式至少n次，至多m次。

## 边界符

### 1.`^`

在区间内代表取反，区间外代表多行匹配的**行开始。**

```
  [^a-z]：不含小写字母的数据
  ^java：java开头的
```

### 2.`$`

匹配开头， 多行匹配中匹配**行**结尾  

```
Java&：匹配以java结尾的字符串
```

:::warning

- `^` 和 `$` 通常一起使用来确保整个字符串完全匹配正则表达式定义的模式，而不是字符串中的某个子串。
- 如果正则表达式中既没有 `^` 也没有 `$`，则匹配可以在字符串中的任何位置发生，只要子串符合正则表达式的模式。
- 在多行模式下（通常通过某种标志启用，如 `m` 标志），`^` 和 `$` 也可以分别匹配每一行的开始和结束，而不仅仅是整个字符串的开始和结束。

:::

## 量词

表示某个模式重复次数
> 在正则表达式中，量词（如{n,m}, ?, *, +等）确实是应用于紧邻其前的那个元字符（或组、字符集等）。如果你想要对多>个字符的组合应用量词，即重复一组特定的字符而不是单个字符，你可以使用圆括号()将这些字符括起来形成一个子表达式>>（也称为分组），然后对这个分组应用量词。

### 1.`*？+`

| \*   | {0, }  0个或多个 |      |
| ---- | ---------------- | ---- |
| ？   | {0,1} 0个或一个  |      |
| \+   | {1, }  1个或多个 |      |

::: warning  注意 在正则表达式中，? 的作用取决于它出现在什么位置以及前面是否有其他量词。
**作为量词：**

- 当 ? 出现在一个字符、一组字符（即括号内的内容），或者一个转义序列之后时，它表示前面的元素是可选的，也就是说它可以出现0次或1次。

> 例如，colou?r 这个正则表达式可以匹配 "color" 或 "colour"，因为 u 后面的 ? 表示 u 是可选的。

**作为非贪婪修饰符：**

- 如果 ? 紧跟在一个量词 (*, +, {n,m}) 后面，则它改变该量词的行为为非贪婪模式。

> 例如，在 .+? 中，+ 是一个量词，表示匹配前面的字符（.）一次或多次；而紧跟其后的 ? 则将这个行为转换成非贪婪模式，意味着它会尽可能少地匹配字符。

总结来说，? 是否代表非贪婪匹配取决于它的上下文。如果它紧跟在一个量词后面，那么它就是非贪婪修饰符；否则，它就是一个量词，表示前面的元素是可选的。
:::

### 2.位置区间`{m,n}`

在正则表达式中，`{m,n}`是一种量词，表示匹配前面的字符或表达式至少`m`次，最多`n`次，其中`m`和`n`均为非负整数，且`n>=m`。

- **匹配数字**：如果要匹配 3 到 5 位的数字，可以使用`\d{3,5}`。例如，对于字符串 "123 1234 12345 123456"，使用`\d{3,5}`进行匹配，会得到 "123"、"1234"、"12345"。
- **匹配字母**：若要匹配至少 2 个，最多 4 个连续的英文字母，可使用`[a-zA-Z]{2,4}`。比如在字符串 "abc defg hijk" 中，会匹配到 "abc"、"defg"、"hijk" 中的 "hij"。
- **匹配特定字符组合**：假设要匹配包含 2 到 3 个 "x" 的字符串片段，正则表达式可以写成`x{2,3}`。在字符串 "xx xxx xxxx" 中，会匹配到 "xx" 和 "xxx"。

- **`{m}`**：表示恰好匹配前面的字符或表达式`m`次。例如，`a{3}`表示匹配连续的 3 个`a`。
- **`{m,}`**：表示匹配前面的字符或表达式至少`m`次，即`m`次及以上。如`\d{3,}`表示匹配至少 3 位的数字。

- **贪婪模式**：默认情况下，`{m,n}`是贪婪的，会尽可能多地匹配。例如，在字符串 "aaaaa" 中使用`a{2,4}`匹配，会得到 "aaaa"。
- **非贪婪模式**：在`{m,n}`后面加上`?`可变为非贪婪模式，会尽可能少地匹配。如在同样的字符串 "aaaaa" 中使用`a{2,4}?`匹配，会得到 "aa"。

实例：

- **验证电话号码**：电话号码一般有固定的位数范围。如国内手机号码可以用`^1\d{10}$`匹配，前两位是`1`开头固定，后面`\d{10}`表示匹配 10 位数字。若要匹配一般的固定电话，区号可能是 3 到 4 位，号码是 7 到 8 位，可以用`^\d{3,4}-\d{7,8}$`。
- **提取文本中的特定内容**：在一篇文章中提取长度在 5 到 10 个字符的单词，可以使用`\b\w{5,10}\b`。`\b`是单词边界，确保匹配的是完整单词。
- **验证密码强度**：要求密码长度在 8 到 16 位，包含字母和数字，可以使用`^(?=.*[a-zA-Z])(?=.*\d)[a-zA-Z\d]{8,16}$`。其中`(?=.*[a-zA-Z])`表示必须包含字母，`(?=.*\d)`表示必须包含数字，`[a-zA-Z\d]{8,16}`表示由字母和数字组成，长度在 8 到 16 位。

:::warning 

在正则表达式中，量词是强大的工具，它们允许你指定元素出现的精确次数范围，从而能够匹配复杂的模式。然而，过度使用量词或创建过于复杂的正则表达式可能会导致性能问题，特别是在处理大型文本时。因此，在设计正则表达式时，应尽可能保持其简洁和高效。

:::



## 字符类

### 1.`[]`

匹配`[]`中**任何一个**即匹配成功。

```
  [Jj]ava ：匹配大写java和小写java
```

**简化：**

- [0-9]：有数字

- [a-z]：所有小写

- [A-Z]：所有大写

- [0-9a-zA-Z]：以上所有

### 2.预定义

指的是常见模式的简化

| **预定类** | **说明**                                                     |
| ---------- | ------------------------------------------------------------ |
| **`\d`**   | 所有数字，相当于`[0-9]`                                      |
| **`\D`**   | 所有非数字，相当于`[^0-9]`                                   |
| **`\w`**   | 所有字符。字母数组下划线，相当于`[A-Za-z0-9_]`               |
| **`\W`**   | 所有非字符，可以匹配特殊字符，相当于`[^A-Za-z0-9_]`          |
| **`\s`**   | 匹配空格（换行符，制表符，空格符等），相当于`[\t\r\n\v\f]`   |
| **`\S`**   | 非空白，相当于`[^\t\r\n\v\f]`                                |
| **`\b`**   | 单词边界 **单词和非单词间的位置`（\w\W）`，**包括单词的**首尾，**单词和**空格** |
| **`点.`**  | 除了`\r`  和`\n`之外的任意字符                               |
