---
title: 分组
article: false
order: 3
---

[[toc]]

在正则表达式中，分组（Grouping）是一种强大的功能，它允许你将多个元素组合在一起作为一个整体来处理。这不仅有助于简化复杂的模式匹配，还能为后续的引用和操作提供便利。：

### 1. 普通分组 

- **作用**：用圆括号 `(...)` 将一部分正则表达式包裹起来，形成一个独立的单元。
- 用途
  - **量词应用**：可以对整个分组应用量词。例如，`(ab)+` 匹配一个或多个 "ab" 的连续序列。
  - **逻辑组合**：用于组合不同的模式部分。例如，`(foo|bar)` 匹配 "foo" 或者 "bar"。

### 2. 捕获分组 

- **捕获**：当使用普通分组时，圆括号内的内容会被“捕获”，也就是说，匹配到的**内容**会被记住，并可以在之后通过特定的方式引用。
- **引用**：可以通过数字 `\1`, `\2`, ... 来引用前面已经捕获的组，其中 `\1` 表示第一个捕获组，`\2` 表示第二个，依此类推。
- **命名捕获组**：一些语言支持为捕获组指定名称，如 `(?<name>...)` 或 `(?'name'...)`，这样可以在替换或其他操作中更直观地引用这些组。

```js
(\d{3})-(\d{2})-(\d{4})
```

这个正则表达式会匹配类似于 `123-45-6789` 的格式，并且每个部分都会被捕获，分别对应 `\1` (123), `\2` (45), 和 `\3` (6789)。

### 3. 非捕获分组 

- **不捕获**：虽然看起来与普通分组相同，但是 `(?:...)` 内的内容不会被记住或捕获，只用于逻辑上的分组。
- 用途
  - **性能优化**：如果你不需要引用分组内的内容，使用非捕获分组可以提高效率，因为它减少了需要跟踪的信息。
  - **复杂模式构建**：帮助组织和管理复杂的正则表达式结构，而无需创建额外的捕获组。

```
(?:ab)+
```

该表达式匹配一个或多个 "ab" 的连续序列，但不会创建任何捕获组。

### 4. 前瞻断言和后瞻断言

- **前瞻断言**：`(?=...)` 是一种零宽断言，它确保当前位置之后紧跟某个模式，但不消耗字符。例如，`foo(?=bar)` 匹配 "foo"，但仅当其后跟有 "bar" 时才匹配。
- **后瞻断言**：`(?<=...)` 类似于前瞻断言，但它检查的是当前位置之前的内容。例如，`(?<=foo)bar` 匹配 "bar"，但仅当其前有 "foo" 时才匹配。

```
\b(foo)(?=bar)\b
```

此表达式将匹配单词边界处的 "foo"，但仅当它后面紧接着是 "bar" 时才成功。

### 5. 条件表达式 

`(?(group)then|else)`

- **条件匹配**：根据是否匹配了某个捕获组来选择不同的模式进行匹配。这里的 `group` 可以是编号或命名的捕获组。
- **语法**：`(?(group)then-pattern|else-pattern)`，如果 `group` 被匹配，则尝试匹配 `then-pattern`；否则，尝试匹配 `else-pattern`。

```
(?(1)a|b)
```

假设有一个先前的捕获组 1，如果它匹配了，则当前模式尝试匹配 "a"；如果没有匹配，则尝试匹配 "b"。

**总结**

分组是正则表达式中不可或缺的一部分，它们提供了灵活性和控制力，使得你可以编写更加复杂和精确的匹配规则。理解如何正确地使用不同类型的分组可以帮助你在文本处理任务中达到更高的效率和准确性。

### 分组和断言的区别

| 特性             | 断言（Assertions）                   | 分组（Grouping）                     |
| ---------------- | ------------------------------------ | ------------------------------------ |
| **主要作用**     | 验证匹配位置或上下文条件             | 组织和逻辑组合模式，可能捕获内容     |
| **是否消耗字符** | 不消耗字符，仅验证位置               | 可能消耗字符，具体取决于分组内的内容 |
| **是否捕获内容** | 通常不捕获内容                       | 普通分组会捕获内容，非捕获分组则不会 |
| **应用场景**     | 确保模式匹配发生在特定位置或上下文中 | 组合模式、应用量词、简化复杂表达式   |

### 实际应用中的差异

- **断言**：当你需要确保某个模式出现在特定位置或上下文中时使用。例如，确保一个子字符串前面或后面有特定的内容，而不需要这些内容成为最终匹配的一部分。
- **分组**：当你想要将多个元素作为一个整体来处理时使用，比如应用量词、提取特定部分的数据或组织复杂的模式结构。
