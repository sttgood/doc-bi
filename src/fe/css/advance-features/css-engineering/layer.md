---
title: 层叠层 layer
article: false
order: 4
---

CSS中的**层叠层（Layer）**是CSS Cascading and Inheritance Level 5（CSS层叠与继承第5级）中引入的一个新特性，用于更精细地控制样式的优先级和层叠顺序。通过层叠层，开发者可以将样式规则分组到不同的层中，从而更好地管理样式的优先级和覆盖关系。

---

## **1. 层叠层的作用**
• **控制优先级**：通过将样式规则分组到不同的层中，可以更灵活地控制样式的优先级。
• **模块化管理**：将不同模块或组件的样式分组到不同的层中，便于维护和扩展。
• **避免冲突**：减少全局样式之间的冲突，提高代码的可读性和可维护性。

---

## **2. 层叠层的语法**
层叠层通过 `@layer` 规则定义，可以指定层的名称和样式规则。

### **2.1 定义层**
```css
@layer 层名 {
  /* 样式规则 */
}
```

### **2.2 定义多个层**
```css
@layer 层1, 层2, 层3;
```

### **2.3 向层中添加样式**
```css
@layer 层名 {
  /* 样式规则 */
}
```

---

## **3. 层叠层的优先级**
层叠层的优先级按照定义的顺序决定，后定义的层优先级高于先定义的层。此外，未分层的样式规则优先级高于所有层。

### 优先级顺序
1. **未分层的样式规则**：优先级最高。
2. **后定义的层**：优先级高于先定义的层。
3. **先定义的层**：优先级最低。

---

## **4. 层叠层的示例**

### **4.1 定义层并添加样式**
```css
@layer base {
  p {
    color: red;
  }
}

@layer theme {
  p {
    color: blue;
  }
}
```
在上述示例中，`theme` 层的优先级高于 `base` 层，因此 `<p>` 元素的文本颜色为蓝色。

### **4.2 定义多个层**
```css
@layer base, theme;

@layer base {
  p {
    color: red;
  }
}

@layer theme {
  p {
    color: blue;
  }
}
```
在上述示例中，`theme` 层的优先级高于 `base` 层，因此 `<p>` 元素的文本颜色为蓝色。

### **4.3 未分层的样式规则**
```css
p {
  color: green;
}

@layer base {
  p {
    color: red;
  }
}

@layer theme {
  p {
    color: blue;
  }
}
```
在上述示例中，未分层的样式规则优先级最高，因此 `<p>` 元素的文本颜色为绿色。

---

## **5. 层叠层的应用场景**
• **主题管理**：将不同主题的样式分组到不同的层中，便于切换主题。
• **组件样式**：将不同组件的样式分组到不同的层中，便于维护和扩展。
• **第三方库**：将第三方库的样式分组到单独的层中，避免与项目样式冲突。

---

## **6. 兼容性**
层叠层是CSS的新特性，目前在现代浏览器中逐渐支持，但在旧版浏览器中可能不兼容。可以通过以下方式检测浏览器是否支持：

```css
@supports (at-rule: @layer) {
  /* 支持层叠层 */
}
```

---

## **7. 总结**
• **层叠层**：用于将样式规则分组到不同的层中，便于控制优先级和管理样式。
• **优先级**：未分层的样式规则优先级最高，后定义的层优先级高于先定义的层。
• **应用场景**：适合用于主题管理、组件样式和第三方库的样式管理。
