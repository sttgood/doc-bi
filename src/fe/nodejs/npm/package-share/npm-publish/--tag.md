---
title: --tag
article: false
---

`npm publish` 命令的 `--tag` 选项允许你为发布的包指定一个标签（tag）。这在管理不同版本或分支时非常有用，特别是当你希望区分稳定版、测试版或开发中的版本。以下是关于 `npm publish --tag` 选项的详细解释：

### 默认标签

如果不指定 `--tag` 选项，默认情况下 `npm publish` 使用 `latest` 标签。这意味着当用户运行 `npm install <package-name>` 时，他们会安装带有 `latest` 标签的最新版本。

```bash
npm publish
```

等同于：

```bash
npm publish --tag=latest
```

### 自定义标签

你可以通过 `--tag` 选项来指定任何自定义标签。常见的标签包括但不限于：

- **`next`**: 用于预发布版本或下一个主要版本。
- **`beta`**: 用于测试版。
- **`alpha`**: 用于早期预览版。
- **`rc`**: 用于候选发布版本（Release Candidate）。

#### 示例

假设你有一个名为 `my-package` 的包，并且想要发布一个带有 `beta` 标签的新版本：

```bash
npm publish --tag=beta
```

此时，如果你想要安装这个带有 `beta` 标签的版本，可以这样做：

```bash
npm install my-package@beta
```

### 使用场景

1. **多条开发线**：如果你同时维护多个开发分支（如 `main`, `next`, `experimental`），可以分别为每个分支创建相应的标签。
2. **分阶段发布**：对于大型项目，可能需要先在内部团队中测试新功能，然后再向公众发布。这时可以使用 `beta` 或 `rc` 等标签来进行分阶段发布。
3. **实验性特性**：某些特性可能还不够成熟，但你想让部分用户提前试用。可以通过 `alpha` 或 `experimental` 标签来实现这一点。

### 标签的作用范围

标签不仅仅适用于整个包，还可以针对特定版本号。例如，你可以为同一个包的不同版本设置不同的标签：

```bash
npm publish --tag=beta
npm publish --tag=rc
```

这样做的好处是可以在不改变默认 `latest` 版本的情况下，提供给用户选择其他版本的机会。

### 查看和管理标签

你可以使用以下命令查看某个包的所有标签及其对应的版本：

```bash
npm view <package-name> dist-tags
```

此外，还可以直接修改标签指向的版本：

```bash
npm dist-tag add <package-name>@<version> <tag>
npm dist-tag rm <package-name> <tag>
```

### 注意事项

- **唯一性**：每个标签在同一时间只能指向一个版本。如果再次使用相同的标签发布新版本，旧版本将失去该标签。
- **权限**：只有包的所有者或有相应权限的人才能添加、删除或更改标签。
- **稳定性**：建议保持 `latest` 标签始终指向最稳定的版本，以免影响依赖此标签的用户。

### 总结

`npm publish --tag` 是一个非常有用的选项，它可以帮助你更灵活地管理和发布不同类型的版本。通过合理利用标签，你可以更好地组织和控制包的生命周期，确保用户能够获取到最适合他们需求的版本。无论是进行分阶段发布还是支持多条开发线，掌握标签的使用都能显著提升你的开发和协作效率。
