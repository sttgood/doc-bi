---
title: du
article: false
order: 
---

du（disk usage）命令是Linux和类Unix系统中用于显示文件和目录磁盘使用情况的工具。以下是du命令的详细解释：

### 一、基本语法

du命令的基本语法为：`du [选项] [文件或目录]`

- **选项**：可选参数，用于控制du命令的输出行为。
- **文件或目录**：可选参数，指定要显示磁盘使用情况的文件或目录。如果不指定，du命令将显示当前目录及其子目录的磁盘使用情况。

### 二、常用选项

1. **-h或--human-readable**：以人类可读的格式显示文件大小，例如K（千字节）、M（兆字节）、G（吉字节）等。这使得输出结果更易于理解。
2. **-a或--all**：显示每个文件和目录的磁盘使用情况，而不仅仅是目录。这包括隐藏文件和目录。
3. **-s或--summarize**：仅显示总大小，而不显示每个子目录的大小。这提供了关于指定目录或文件总磁盘使用情况的快速概览。
4. **-c或--total**：在输出的最后一行显示总大小。这有助于了解整个扫描范围内的总磁盘使用情况。
5. **-k或--kilobytes**：以千字节（KB）为单位显示文件大小。这是du命令的默认输出单位之一。
6. **-m或--megabytes**：以兆字节（MB）为单位显示文件大小。这提供了另一种易于理解的输出单位。
7. **-x或--one-file-system**：跳过其他文件系统的挂载点，只计算当前文件系统的磁盘使用情况。这有助于避免跨文件系统的磁盘使用情况计算。
8. **-L或--dereference**：跟随符号链接，计算实际文件的大小而不是符号链接本身的大小。这有助于了解符号链接所指向的实际文件占用的磁盘空间。
9. **-S或--separate-dirs**：不包括子目录的大小，只显示当前目录的大小。这有助于单独查看当前目录的磁盘使用情况。
10. **--exclude=PATTERN**：排除与指定模式匹配的文件或目录。这可以用于过滤掉不感兴趣的文件或目录。
11. **--max-depth=N**：限制显示的目录层级深度。只显示指定层级的目录和文件的磁盘使用情况。这有助于减少输出的详细程度。
12. **--time**：显示文件的最后修改时间。这有助于了解文件和目录的更新情况。

### 三、高级用法

1. **结合sort和head命令找出最大的几个文件或目录**：
   - 使用`du -ah [目录] | sort -rh | head -n 10`命令可以找出当前目录下占用空间最大的前10个文件或目录。其中，`-a`选项显示所有文件和目录，`-h`选项以人类可读的格式显示大小，`sort -rh`按大小降序排序，`head -n 10`显示前10个结果。
2. **排除指定文件或目录**：
   - 使用`--exclude=PATTERN`选项可以排除与指定模式匹配的文件或目录。例如，`du --exclude=*.log [目录]`将排除所有以.log结尾的文件。
3. **限制显示的目录层级深度**：
   - 使用`--max-depth=N`选项可以限制显示的目录层级深度。例如，`du --max-depth=1 [目录]`将只显示指定目录及其直接子目录的磁盘使用情况。

### 四、注意事项

1. du命令在大型文件系统上可能比较慢，特别是在递归计算目录大小时。如果需要频繁使用，可以考虑优化或限制搜索范围。
2. 在遍历文件系统时，可能会遇到权限问题，特别是当不是root用户时。因此，建议使用sudo来运行这个命令，以确保有足够的权限。
3. du命令显示的是文件和目录的实际物理大小，而不是文件系统中所分配的大小。这意味着，即使文件在文件系统中被分配了更多的空间（例如，由于文件系统块大小或对齐要求），du命令也只会显示文件实际占用的空间。

综上所述，du命令是Linux和类Unix系统中用于查看文件和目录磁盘使用情况的重要工具。通过灵活运用du命令及其选项，可以有效地监控和管理系统的磁盘空间。