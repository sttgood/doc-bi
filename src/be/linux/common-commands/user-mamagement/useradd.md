---
title: useradd
article: false
order: 
---

`useradd`命令是Linux系统中用于创建新用户账户的基础工具，掌握其使用方法是系统管理员管理用户账户的重要技能。以下是对`useradd`命令的详细解析：

### 一、基本语法

`useradd`命令的基本语法如下：

```bash
bash复制代码

useradd [选项] 用户名
```

其中，选项是可选的，用于指定用户的各种属性和设置；用户名则是必选的，用于指定新创建的用户账户的名称。

### 二、常用选项

`useradd`命令支持多个选项，以下是一些常用的选项及其功能：

1. `-d`：指定用户登录时的起始目录，即用户的家目录。如果不指定，则默认在`/home`目录下创建以用户名命名的目录作为家目录。
2. `-D`：显示或更改`useradd`命令的默认设置，如默认的家目录路径、默认的shell等。
3. `-e`：指定账号的有效期限，可以是一个具体的日期，也可以使用相对时间（如“+30天”）。
4. `-f`：指定在密码过期后多少天即关闭该账号。
5. `-g`：指定用户所属的主群组。如果不指定，则默认创建一个与用户名相同的群组作为主群组。
6. `-G`：指定用户所属的附加群组，多个附加组用逗号隔开。
7. `-m`：自动建立用户的家目录。如果指定了`-d`选项，则在此选项指定的目录下创建家目录。
8. `-M`：不自动建立用户的家目录。
9. `-n`：取消建立以用户名称为名的群组。
10. `-s`：指定用户登录后所使用的shell。如果不指定，则默认使用`/bin/bash`。
11. `-u`：指定用户的UID（用户标识号），必须确保与系统中其他用户的UID不冲突。
12. `-r`：创建一个系统账户，这种账户通常没有家目录，且UID在系统保留范围内。
13. `-b`：指定新账户的主目录的基目录。
14. `-c`：指定用户注释信息，该信息会存储在`/etc/passwd`文件的第五个字段中。
15. `-K`：不使用`/etc/login.defs`中的默认值。
16. `-l`：不要将此用户添加到最近登录和登录失败数据库。
17. `-N`：不创建与用户名同名的组。
18. `-o`：允许使用重复的UID创建用户（不推荐，因为这可能导致系统安全问题）。
19. `-p`：指定加密后的新账户密码。注意，这里的密码需要是经过加密处理的，通常使用`passwd`命令设置密码时会自动进行加密。

### 三、使用示例

1. 创建一个新用户并指定家目录和主群组：

```bash
bash复制代码

useradd -d /home/newuser -g root newuser
```

这个命令将创建一个名为`newuser`的新用户，家目录设置为`/home/newuser`，主群组设置为`root`。

1. 创建一个新用户并设置密码过期后的禁用时间：

```bash
bash复制代码

useradd -e 2025-12-31 -f 30 newuser
```

这个命令将创建一个名为`newuser`的新用户，并设置账户的有效期限为2025年12月31日，密码过期后30天账户将被禁用。

1. 创建一个新用户并指定多个附加群组：

```bash
bash复制代码

useradd -G group1,group2,group3 newuser
```

这个命令将创建一个名为`newuser`的新用户，并将其添加到`group1`、`group2`和`group3`三个附加群组中。

1. 创建一个没有家目录且不能登录系统的用户：

```bash
bash复制代码

useradd -M -s /sbin/nologin mysql
```

这个命令将创建一个名为`mysql`的用户，该用户没有家目录且不能登录系统。

### 四、注意事项

1. 在使用`useradd`命令创建新用户后，通常需要使用`passwd`命令为新用户设置密码。
2. 创建用户时，系统会自动在`/etc/passwd`、`/etc/shadow`、`/etc/group`和`/etc/gshadow`文件中添加相应的条目。
3. 确保为新用户指定的UID和GID在系统中是唯一的，以避免冲突。
4. 在生产环境中，应谨慎使用`-o`选项允许重复的UID，因为这可能导致系统安全问题。

综上所述，`useradd`命令是Linux系统中用于创建新用户账户的重要工具。通过掌握其基本语法和常用选项，系统管理员可以更加方便地创建和管理用户账户，从而提高系统的安全性和稳定性。