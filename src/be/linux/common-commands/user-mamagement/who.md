---
title: who
article: false
order: 
---

`who`命令是Linux和Unix系统中用于显示当前登录用户信息的命令行工具。以下是关于`who`命令的详细解析：

### 一、基本功能

`who`命令主要用于显示当前登录到系统的用户信息，包括用户名、登录时间、使用的终端（TTY）、远程主机名或IP地址等。这对于系统管理员监控系统活动以及普通用户了解谁正在使用同一台机器非常有用。

### 二、命令格式

```bash
bash复制代码

who [OPTION] [file]
```

- `OPTION`：可选参数，用来调整`who`命令的行为。
- `file`：指定包含登录记录的文件，默认情况下是`/var/run/utmp`或`/var/log/wtmp`。其中，`/var/run/utmp`文件包含当前登录会话的信息，而`/var/log/wtmp`文件则记录了所有的登录和注销事件的历史。

### 三、常用选项

1. `-a` 或 `--all`：显示所有可用的信息，包括用户名、登录时间、终端、远程主机名或IP地址、空闲时间、进程ID和退出信息等。这实际上是结合了多个选项的效果。
2. `-b` 或 `--boot`：显示系统的最后一次启动时间。
3. `-d` 或 `--dead`：显示已经终止但仍然有条目保留在`utmp`文件中的进程（即“死”进程）。
4. `-H` 或 `--heading`：在输出中包含列标题，使输出信息更加清晰。
5. `-l` 或 `--login`：显示系统监听的端口信息，即所有可登录的终端信息。
6. `-m`：仅显示当前终端的信息。
7. `-p` 或 `--process`：显示处于等待状态的进程信息。
8. `-q` 或 `--count`：仅显示用户名和总用户数，提供系统上当前登录用户数量的快速概览。
9. `-r` 或 `--runlevel`：显示当前的运行级别，即系统的当前工作模式。
10. `-s` 或 `--short`：简化输出格式，仅显示用户名、终端和登录时间，这是`who`命令的默认行为。
11. `-t` 或 `--time`：显示系统最后更改的时间，即上次系统时钟被更改的时间。
12. `-u` 或 `--users`：显示每个用户的附加信息，如空闲时间和进程ID。
13. `-T`、`-w`、`--mesg`、`--message`、`--writable`：显示用户的终端状态，`+`表示可写，`-`表示不可写。
14. `--ips`：同时显示登录用户的IP地址（如果可用）。

### 四、输出字段解释

执行`who`命令时，通常会看到类似如下的输出：

```
user pts/0 2023-04-10 19:35 (192.168.1.1)
admin pts/1 2023-04-10 20:00 (192.168.1.2)
```

- `user`和`admin`是用户名。
- `pts/0`和`pts/1`是伪终端从属设备的名字，表示用户的登录会话。
- `2023-04-10 19:35`和`2023-04-10 20:00`分别是这些用户登录的时间。
- `(192.168.1.1)`和`(192.168.1.2)`是远程主机的IP地址，表明用户是从哪里连接的。

### 五、实用举例

1. **查看当前登录用户**：

   ```bash
   bash复制代码
   
   who
   ```

2. **查看所有当前登录的用户及其详细信息**：

   ```bash
   bash复制代码
   
   who -a
   ```

3. **显示最后一次系统启动的时间**：

   ```bash
   bash复制代码
   
   who -b
   ```

4. **显示当前登录用户的数量**：

   ```bash
   bash复制代码
   
   who -q
   ```

5. **仅显示当前终端的信息**：

   ```bash
   bash复制代码
   
   who -m
   ```

6. **显示用户的终端状态**：

   ```bash
   bash复制代码
   
   who -T
   ```

7. **结合`grep`查找特定用户**：

   ```bash
   bash复制代码
   
   who | grep "username"
   ```

8. **统计当前有多少个用户登录**：

   ```bash
   bash复制代码
   
   who | wc -l
   ```

### 六、注意事项

- `who`命令无需特殊权限进行访问，普通用户即可执行。
- 输出的内容可能因系统配置和用户活动状态而有所不同。
- `who`命令是一个简单但强大的工具，可用于显示系统上当前登录用户的信息，对于系统管理和监控用户活动非常有用。

综上所述，`who`命令是Linux和Unix系统中用于显示当前登录用户信息的实用工具。通过掌握其语法参数和使用方法，用户可以更加全面地了解谁正在使用系统以及他们是如何连接的。