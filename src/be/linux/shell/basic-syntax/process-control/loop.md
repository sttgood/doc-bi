---
title: 循环
article: false
order: 3
---

在 Bash 脚本编程中，循环结构是一种重要的流程控制机制，它允许脚本重复执行一段代码块，直到满足特定条件为止。Bash 支持多种循环结构，主要包括 `for` 循环、`while` 循环和 `until` 循环。

### 一、for 循环

`for` 循环用于遍历列表中的每个元素，并对每个元素执行一系列命令。Bash 中的 `for` 循环有两种主要形式：列表遍历和 C 风格循环。

#### 列表遍历

```bash
for 变量 in 列表; do
    # 对列表中的每个元素执行的命令
done
```

- `变量`：在循环体中引用当前元素的变量。
- `列表`：要遍历的元素列表，可以是数字、字符串或命令的输出。
- `do ... done`：循环体的开始和结束。

#### C 风格循环

```bash
for (( 初始化; 条件; 迭代 )); do
    # 循环体中的命令
done
```

- `初始化`：循环开始前的初始化表达式。
- `条件`：每次迭代前检查的条件，如果为真则继续循环，否则退出。
- `迭代`：每次迭代后执行的表达式，通常用于更新循环变量。

### 二、while 循环

`while` 循环在条件为真时重复执行代码块。

```bash
while [ 条件表达式 ]; do
    # 当条件为真时执行的命令
done
```

- `[ 条件表达式 ]`：条件表达式，必须被方括号包围，并且与方括号之间必须有空格。
- `do ... done`：循环体的开始和结束。

### 三、until 循环

`until` 循环与 `while` 循环相反，它在条件为假时重复执行代码块。

```bash
until [ 条件表达式 ]; do
    # 当条件为假时执行的命令
done
```

- `[ 条件表达式 ]`：条件表达式，与 `while` 循环中的用法相同。
- `do ... done`：循环体的开始和结束。

### 注意事项

1. **循环变量**：在 `for` 循环和 C 风格循环中，循环变量在循环体内是可用的，并且其值在每次迭代后都会更新。
2. **退出循环**：可以使用 `break` 语句提前退出循环，或使用 `continue` 语句跳过当前迭代并进入下一次迭代。
3. **引号**：在条件表达式和列表元素中，如果包含空格或特殊字符，应使用引号将其括起来以避免解析错误。
4. **嵌套循环**：Bash 支持循环的嵌套，即在一个循环体内再定义一个或多个循环。但需要注意循环变量的命名和作用域，以避免冲突和意外行为。

通过合理使用这些循环结构，Bash 脚本可以高效地处理重复任务和复杂逻辑。
