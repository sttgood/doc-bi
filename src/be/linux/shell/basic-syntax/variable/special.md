---
title: 特殊变量
article: false
order: 3
---

在Bash中，特殊变量是指那些具有预定义含义和用途的变量，它们提供了脚本运行环境和命令行参数的重要信息。以下是对Bash中特殊变量的全面概述：

## 一、位置参数变量

### `$0`

- 含义：当前执行的脚本或命令的名称。如果脚本包含路径，则输出也包括路径。
- 用途：在脚本中引用脚本名称，或用于调试和日志记录。

### `1,2, ..., $9`

- 含义：传递给脚本或函数的前九个参数。
- 用途：在脚本中处理命令行参数，如文件名、选项等。

### `10,{11}, ...`

- 含义：当需要访问超过九个参数时，使用这种格式。
- 用途：处理超过九个的命令行参数。

## 二、特殊变量

### `$#`

- 含义：传递给脚本或函数的参数个数。
- 用途：在脚本中检查参数数量，确保用户提供了正确数量的参数。

### `∗和@`

- 含义：都表示传递给脚本或函数的所有参数。但在双引号内使用时，它们的行为有所不同。`$*`将所有参数视为一个整体（单个字符串），而`$@`将每个参数视为独立的单词（字符串数组）。
- 用途：在脚本中处理所有参数，如遍历、连接或分割参数。

### `$?`

- 含义：上一个命令的退出状态码。0表示成功，非0表示失败或错误。
- 用途：在脚本中进行条件判断，根据命令的退出状态码来决定后续操作。

### `$$`

- 含义：当前Shell进程的ID（PID）。
- 用途：在脚本中生成唯一的文件名或日志文件名，或用于调试和跟踪脚本的执行过程。

### `$!`

- 含义：最后一个后台命令的进程ID。
- 用途：在脚本中监控后台命令的执行状态，或用于等待后台命令完成。

### `$_`

- 含义：上一个命令或脚本的最后一个参数。
- 用途：在脚本中引用上一个命令的最后一个参数，或用于调试和日志记录。

### `$-`

- 含义：表示当前Shell的选项。
- 用途：在脚本中检查或修改Shell的选项。

## 三、变量展开和替换

Bash还提供了一些用于变量展开和替换的特殊语法，这些语法允许对变量的值进行各种操作，如获取长度、子字符串提取、模式匹配和替换等。以下是一些常见的变量展开和替换语法：

1. **${var}**：返回变量var的值。
2. **${#var}**：返回变量var的字符长度。
3. **${var:offset}**：返回变量var从位置offset之后开始提取字符至结束。
4. **${var:offset:length}**：返回变量var从offset之后，提取长度为length的字符。
5. **${var#word}**：返回从变量var开头开始删除最短匹配的word子字符串。
6. **${var##word}**：返回从变量var开头开始删除最长匹配的word子字符串。
7. **${var%word}**：返回从变量var结尾开始删除最短匹配的word子字符串。
8. **${var%%word}**：返回从变量var结尾开始删除最长匹配的word子字符串。
9. **${var/oldstring/newstring}**：使用newstring替换变量var中第一个匹配的oldstring。
10. **${var//oldstring/newstring}**：使用newstring替换变量var中所有匹配的oldstring。

此外，Bash还支持间接引用和变量名展开等高级功能，这些功能允许对变量的值进行更复杂的操作。

