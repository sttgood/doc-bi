---
title: 4.1 网络成提供两种服务
article: false
index: false
dir:
  order: 1
  link: true
---

## **网络层的两种服务**

### **1. 虚电路服务（Virtual Circuit Service）**
- **核心思想**：面向连接的通信方式，数据传输前需建立逻辑连接（虚电路）。  
- **特点**：  
  - **建立连接**：通信前需通过信令协议（如ATM网络）建立虚电路路径。  
  - **固定路径**：数据沿预先建立的路径传输，分组顺序一致。  
  - **资源预留**：网络层负责流量控制和差错恢复（可靠性由网络保障）。  
  - **标识方式**：分组携带虚电路号（而非完整的目标地址）。  
- **适用场景**：  
  - 传统电信网络（如X.25、ATM）。  
  - 需要高可靠性和固定延迟的应用（如电话通信）。  

#### **虚电路工作流程**  
1. **建立连接**：发送方请求建立虚电路，网络分配虚电路号并记录路由表。  
2. **数据传输**：所有分组沿同一虚电路传输，网络层保证顺序和可靠性。  
3. **释放连接**：通信结束后释放虚电路资源。  

---

### **2. 数据报服务（Datagram Service）**
- **核心思想**：无连接的通信方式，每个分组独立选择传输路径。  
- **特点**：  
  - **无连接**：无需预先建立连接，直接发送数据。  
  - **动态路由**：每个分组独立选择路径（可能乱序到达）。  
  - **资源竞争**：网络层不保证可靠性，由终端系统（传输层）负责纠错。  
  - **地址标识**：分组需携带完整的源地址和目的地址。  
- **适用场景**：  
  - 互联网（TCP/IP协议栈中的IP协议）。  
  - 灵活性强、适应异构网络环境的应用（如Web浏览、电子邮件）。  

#### **数据报工作流程**  
1. **发送分组**：每个分组独立封装目标地址，路由器根据路由表逐跳转发。  
2. **路由选择**：各分组可能通过不同路径到达目的地。  
3. **接收重组**：接收端根据传输层协议（如TCP）重组乱序分组。  

---

## **两种服务的对比**

| **对比项**   | **虚电路服务**             | **数据报服务**                      |
| ------------ | -------------------------- | ----------------------------------- |
| **连接建立** | 需要预先建立虚电路         | 无需建立连接                        |
| **地址标识** | 分组携带虚电路号（短标识） | 分组携带完整源/目的IP地址（长标识） |
| **路径选择** | 固定路径                   | 动态路由（逐跳转发）                |
| **分组顺序** | 保证顺序                   | 可能乱序，需传输层重组              |
| **可靠性**   | 网络层保障（如重传、确认） | 网络层不保障，由传输层处理（如TCP） |
| **资源占用** | 需预留资源（如带宽）       | 按需竞争资源                        |
| **适用场景** | 实时通信、传统电信网络     | 互联网、动态网络环境                |

---

## **为什么互联网选择数据报服务？**
1. **设计哲学**：遵循“端到端原则”，简化网络核心功能，增强灵活性和可扩展性。  
2. **适应异构性**：不同子网可采用不同链路层技术，数据报服务兼容性强。  
3. **容错性**：动态路由允许绕过故障节点，提高网络鲁棒性。  
4. **经济性**：无需维护连接状态，降低路由器开销。  

---

## **典型协议示例**
- **虚电路服务**：ATM（Asynchronous Transfer Mode）、帧中继（Frame Relay）。  
- **数据报服务**：IP协议（IPv4/IPv6），结合TCP实现可靠传输。  

---

**总结**：虚电路服务强调网络层的可靠性，适合专用网络；数据报服务以简单高效为核心，支撑了互联网的开放性和可扩展性。两种服务的选择取决于具体应用需求和网络设计目标。