---
title: 子网划分原因
article: false
order: 1
---

### 一、背景问题

在ARPANET（阿帕网，互联网的前身）的早期阶段，IP地址的设计存在一些不合理之处。具体来说，**IP地址空间的利用率有时很低**，同时给每一个物理网络分配一个网络号会导致路由表变得过大，进而影响网络性能。此外，两级IP地址（即网络号+主机号）**的结构不够灵活**，难以满足日益增长的网络需求。

### 二、划分子网的提出

为了解决上述问题，从1985年起，在IP地址中增加了一个“子网号字段”，这一做法被称为划分子网。划分子网的基本思路是，一个拥有多个物理网络的单位可以根据自己的需要将物理网络划分为若干个子网，这是单位的内部操作，单位网络对外仍然表现为一个网络。划分子网的方法是从网络的主机号借用若干位作为子网号，这样主机号也相应减少，二级IP地址（网络号+主机号）就变为了三级IP地址（网络号+子网号+主机号）。

```bash
IP地址::={<网络号>,<主机号>,<子网号>}
```



### 三、子网掩码的产生

随着子网的划分，如何确定一个IP地址属于哪个子网成为了一个问题。因为数据包首部不包含子网划分相关的信息，所以路由器需要一种方法来找到目的主机所在的子网。这时，子网掩码应运而生。子网掩码（subnet mask）又叫网络掩码、地址掩码、子网络遮罩，它是一个32位地址，用于屏蔽IP地址的一部分以区别网络标识和主机标识。子网掩码用连续的1代表网络位（包括子网位），用连续的0代表主机位。通过子网掩码和IP地址的逐位逻辑“与”运算，路由器可以确定一个IP地址的网络地址，从而判断该IP地址是否属于本网段。

### 四、划分子网的意义与影响

划分子网增加了网络的灵活性，使得一个大的网络可以被划分为多个小的子网，每个子网可以独立地进行管理。这有助于降低网络流量、隐藏网络的复杂性，并提高网络的安全性。然而，划分子网也减少了能够连接在网络上的主机总数。

:::warning

划分子网后，**主机数量不会增加**，反而可能会减少。这是因为划分子网的过程实际上是从原有的主机位中借用一部分作为子网位，从而增加了网络的层次结构（即网络号+子网号+主机号），但相应地减少了每个子网内可以分配的主机数量。

具体来说，当一个大的网络被划分为多个小的子网时，每个子网都会获得一个唯一的子网号，这个子网号是从原网络的主机位中划分出来的。因此，每个子网所能容纳的主机数量就会受到子网位长度的限制。在子网划分后，虽然整个网络可以容纳的总主机数（考虑所有子网）在理论上可能保持不变（但实际上由于子网位的占用，有效主机数会略有减少，因为需要排除全0和全1的主机地址），但每个单独子网内的主机数量肯定会少于划分前的整个网络所能容纳的主机数量。

例如，一个完整的C类网络本身可容纳254台主机（不考虑全0和全1地址）。如果对其进行划分子网，比如划分为4个子网，那么每个子网所能容纳的主机数量就会大大减少，因为子网位占据了原本用于主机位的部分。实际上，在划分为4个子网的情况下，每个子网可能只能容纳60多台主机（具体数量取决于子网掩码的设置）。

因此，划分子网的主要目的是为了**增加网络的灵活性和可管理性**，而不是增加主机的数量。通过划分子网，可以将一个大的网络划分为多个小的、相对独立的子网，每个子网都可以有自己的网络地址和子网掩码，从而方便地进行网络管理和优化。

:::