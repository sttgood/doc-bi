---
title: 元组不可变
article: false
order: 2
---

在Python中，元组（tuple）的不可变性是其核心特性之一。这一特性意味着，一旦元组被创建，其内部包含的元素就不能被更改、添加或删除。这种不可变性带来了几个重要的好处：

1. **数据安全性**：由于元组的内容无法被修改，因此它们可以被用作不可变的数据结构，这在多线程编程或需要确保数据不被意外更改的场合中特别有用。
2. **哈希与集合成员**：元组因其不可变性而可以被哈希（hash）。这意味着它们可以用作字典（dict）的键或集合（set）的元素。相比之下，列表因为其内容可变，所以不能被哈希，也就不能用作这些数据结构。
3. **性能优化**：由于元组是不可变的，Python解释器可以在创建时对其进行优化，例如通过减少内存分配和复制操作，从而在某些情况下提高性能。
4. **代码可读性**：使用元组可以清晰地表达数据的不可变性，这有助于代码的阅读和维护。当看到一个元组时，程序员可以立即知道这个数据结构的内容在创建后不会被更改。

尽管元组的内容不可变，但你可以创建包含可变对象的元组。然而，即使在这种情况下，你也不能更改元组中对象的身份（即你不能将元组中的一个对象替换为另一个对象），但你可以更改对象自身的状态（如果对象本身是可变的）。

```python
# 创建一个包含可变对象的元组
mutable_tuple = ([1, 2, 3], {'a': 1})
 
# 更改元组中列表的内容（这是允许的，因为列表是可变的）
mutable_tuple[0][0] = 10
print(mutable_tuple)  # 输出: ([10, 2, 3], {'a': 1})
 
# 更改字典的内容（同样允许）
mutable_tuple[1]['b'] = 2
print(mutable_tuple)  # 输出: ([10, 2, 3], {'a': 1, 'b': 2})
 
# 但是，你不能更改元组中对象的身份（例如，将列表替换为另一个列表）
# mutable_tuple[0] = [4, 5, 6]  # 这会引发TypeError
```

在上面的例子中，尽管元组`mutable_tuple`包含了可变对象（列表和字典），但我们仍然不能更改这些对象在元组中的位置或替换它们。我们只能更改这些对象自身的状态（例如，列表的元素或字典的键值对）。

总之，元组的不可变性是Python语言的一个重要特性，它提供了数据安全性、哈希能力、性能优化和代码可读性的好处。